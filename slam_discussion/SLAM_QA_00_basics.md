# SLAM Q&A basics

-----

11. 坐标系转换

世界坐标系（world） 相机坐标（camera） 像素坐标（pixel）


1. SLAM中为什么用李群李代数？

slam中一个关键问题之一就是求解相机的位姿，人们找了很多以相机位姿为变量的误差函数，比如光度误差，重投影误差等等，希望使得误差最小，进而求得比较准确的相机位姿。比如对重投影误差，我们想要寻找一个最佳的位姿T，使得把每次观测的误差累加得到的整体误差J（T）最小化。优化方法一般都采用迭代优化的方法，每次迭代都更新一个位姿的增量delta，使得目标函数最小。这个delta就是通过误差函数J（T）对T微分得到的。T中的旋转矩阵R自身是带有约束的，它是正交矩阵并且行列式为1。如果把它们作为优化变量，会引入额外的约束，使优化变得困难。通过李群-李代数间的转换关系，就可以把这个问题变成无约束的优化问题。   

更详细点说。群是一种集合加上一种运算的代数结构，李群是具有连续光滑性质的群。旋转矩阵和乘法就构成了旋转矩阵群SO3，变换矩阵和乘法构成了变换矩阵群SE3。SO3和SE3空间对加法计算并不封闭，也就是说任意两个变换矩阵相加后并不是一个变换矩阵，这样就没有办法按照导数的定义进行求导（如对一个空间点进行旋转然后对该旋转求导）。李代数对应李群的切空间，它描述了李群局部的导数。李代数是由向量组成的，而向量是对加法封闭的。这样我们就可以通过对李代数求导来间接的对变换（或旋转）矩阵求导了。对于求导一般有两种方法，一种是用李代数表示姿态，然后对李代数求导；一种是对李群左乘或右乘一个微小扰动，然后对该扰动对应的李代数求导。前者会含有形式比较复杂的雅可比矩阵，故一般用后者进行计算。

旋转矩阵自身是带有约束的，正交且行列式为1，他们作为优化变量时，会引入额外的约束，时优化变的困难，通过李群李代数的转换关系，把位姿估计变成无约束的优化问题。


2. 为什么要引入李群李代数

旋转矩阵自身是带有约束的，正交且行列式为1，他们作为优化变量时，会引入额外的约束，时优化变的困难，通过李群李代数的转换关系，把位姿估计变成无约束的优化问题。


10. 解释相机内外参数

相机内参包括焦距fx，fy，cx，cy，径向畸变系数k1,k2,k3，切向畸变系数p1,p2

其中内参一般来说是不会改变，但是当使用可变焦距镜头时每次改变焦距需要重新标定内参

当图像裁剪时内参cx，cy会发生改变，比如图像从8*8变成4*4时，cx，cy需要除以2

一般标定工业相机时只需要得到畸变系数k1，k2即可，对于畸变系数较大的鱼眼相机需要得到k3，p1，p2

相机外参分为旋转矩阵R和平移矩阵t，旋转矩阵和平移矩阵共同描述了如何把点从世界坐标系

转换到摄像机坐标系


6. 单目，双目，深度相机对比

单目：成本低，搭建简单，单目相机有尺度不确定性，需要专门初始化

双目：不需要专门初始化，能够计算深度，基线距离越大，测量距离越远，可以用于室内和室外，标定较为复杂，视差计算比较消耗资源

深度：测量范围窄，噪声大，易受日光干扰，无法测量透射材料，主要用于室内


8. 单目视觉slam中尺寸漂移是怎么产生的

单目相机根据一张图片无法得出一张图片中物体的实际大小，同理也就无法得出运动的尺度大小，这是产生尺度漂移的根源。而在优化过程中，单目相机使用对极几何中的三角测量原理，而三角测量中，极小的角度误差在累积之后深度不确定都会变得很大，从而无法保证尺度一致性。


12. 时间戳

工程目录下有GPS保存的坐标文件gps.txt和激光雷达保存的坐标文件laser.txt两个文件，两个文件的第一列为记录当前数据的时间戳，后两列为坐标。由于GPS每隔500时间单位保存一次数据，激光雷达每隔300时间单位保存一次数据，因此，一段时间内激光雷达保存的数据比GPS保存的数据要多。现在想取出两个文件中时间戳最接近的数据，并分别存放在gps2.txt和laser2.txt中，编写程序实现。（不知道哪位大神能讲下这道题。。。）


9. SLAM中的绑架问题

绑架问题就是重定位，是指机器人在缺少之前位置信息的情况下，如何去确定当前位姿。例如当机器人被安置在一个已经构建好地图的环境中，但是并不知道它在地图中的相对位置，或者在移动过程中，由于传感器的暂时性功能故障或相机的快速移动，都导致机器人先前的位置信息的丢失，在这种情况下如何重新确定自己的位置。
